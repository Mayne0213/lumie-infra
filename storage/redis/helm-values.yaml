# Redis Sentinel configuration for LUMIE cache
# Bitnami Redis Helm chart

global:
  imageRegistry: zot0213.kro.kr
  security:
    allowInsecureImages: true

image:
  repository: bitnamilegacy/redis
  tag: "8.2.1-debian-12-r0"

# Replication architecture with Sentinel
architecture: replication

# Disable authentication for internal cluster communication
auth:
  enabled: false

# Master configuration
master:
  persistence:
    enabled: true
    size: 1Gi
    storageClass: local-path
  resources:
    requests:
      memory: 256Mi
      cpu: 20m
    limits:
      memory: 256Mi

# Replica configuration
replica:
  replicaCount: 2
  persistence:
    enabled: true
    size: 1Gi
    storageClass: local-path
  resources:
    requests:
      memory: 256Mi
      cpu: 20m
    limits:
      memory: 256Mi

# Sentinel configuration for HA
sentinel:
  enabled: true
  image:
    repository: bitnamilegacy/redis-sentinel
    tag: "8.2.1-debian-12-r0"
  quorum: 2
  downAfterMilliseconds: 5000
  failoverTimeout: 60000
  resources:
    requests:
      memory: 64Mi
      cpu: 20m
    limits:
      memory: 64Mi

# Metrics for monitoring
metrics:
  enabled: true
  serviceMonitor:
    enabled: true
    namespace: lumie-cache
  resources:
    requests:
      cpu: 10m
      memory: 192Mi
    limits:
      memory: 192Mi
