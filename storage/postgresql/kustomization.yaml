apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: postgresql

resources:
  # Vault External Secrets
  - vault/app-user-secret.yaml
  - vault/superuser-secret.yaml
  # - vault/backup-s3-secret.yaml  # Disabled - using Velero instead

  # StorageClass with Retain policy
  - manifests/storageclass.yaml

  # CNPG Cluster
  - manifests/cluster.yaml

  # PodMonitor is auto-created by CNPG operator via cluster.spec.monitoring.enablePodMonitor

  # Scheduled Backup - Disabled, using Velero instead
  # - manifests/scheduled-backup.yaml
