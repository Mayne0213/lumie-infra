# Cert-Manager Helm Values
# Chart: https://github.com/cert-manager/cert-manager/tree/master/deploy/charts/cert-manager

# Install CRDs with Helm
installCRDs: true

replicaCount: 1

# Resource settings (no CPU limit for stability)
resources:
  requests:
    cpu: 15m
    memory: 100Mi
  limits:
    memory: 100Mi

webhook:
  replicaCount: 1
  # Resource settings (no CPU limit for stability)
  resources:
    requests:
      cpu: 15m
      memory: 100Mi
    limits:
      memory: 100Mi
  # Affinity - Soft Anti-Affinity to spread pods across nodes
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                app.kubernetes.io/name: cert-manager-webhook
            topologyKey: kubernetes.io/hostname

cainjector:
  replicaCount: 1
  # Resource settings (no CPU limit for stability)
  resources:
    requests:
      cpu: 15m
      memory: 126Mi
    limits:
      memory: 248Mi
  # Affinity - Soft Anti-Affinity to spread pods across nodes
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                app.kubernetes.io/name: cert-manager-cainjector
            topologyKey: kubernetes.io/hostname

# Affinity - Soft Anti-Affinity to spread pods across nodes
affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchLabels:
              app.kubernetes.io/name: cert-manager
          topologyKey: kubernetes.io/hostname

# Prometheus metrics
prometheus:
  enabled: true
  servicemonitor:
    enabled: false

