{{- if and .Values.common.database.enabled .Values.common.database.backup.enabled }}
apiVersion: postgresql.cnpg.io/v1
kind: ScheduledBackup
metadata:
  name: {{ include "web-app.fullname" . }}-db-backup
spec:
  schedule: {{ .Values.common.database.backup.schedule | default "0 19 * * *" | quote }}
  backupOwnerReference: self
  cluster:
    name: {{ include "web-app.fullname" . }}-db
{{- end }}
