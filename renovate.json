{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended"],
  "dependencyDashboard": true,
  "schedule": ["every weekend"],
  "timezone": "Asia/Seoul",
  "packageRules": [
    {
      "matchDatasources": ["docker"],
      "automerge": false,
      "labels": ["docker", "dependencies"]
    },
    {
      "matchPackagePatterns": ["postgres", "postgresql", "cnpg"],
      "groupName": "PostgreSQL"
    },
    {
      "matchPackagePatterns": ["grafana", "loki", "tempo"],
      "groupName": "Grafana Stack"
    },
    {
      "matchPackagePatterns": ["prometheus", "alertmanager", "thanos"],
      "groupName": "Prometheus Stack"
    }
  ],
  "regexManagers": [
    {
      "fileMatch": ["^renovate\\.json$"],
      "matchStrings": [
        "\"docker:(?<depName>[^\"]+)\":\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "docker",
      "registryUrlTemplate": "https://registry-1.docker.io"
    },
    {
      "fileMatch": ["^renovate\\.json$"],
      "matchStrings": [
        "\"ghcr:(?<depName>[^\"]+)\":\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "docker",
      "registryUrlTemplate": "https://ghcr.io"
    },
    {
      "fileMatch": ["^renovate\\.json$"],
      "matchStrings": [
        "\"quay:(?<depName>[^\"]+)\":\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "docker",
      "registryUrlTemplate": "https://quay.io"
    },
    {
      "fileMatch": ["^renovate\\.json$"],
      "matchStrings": [
        "\"k8s:(?<depName>[^\"]+)\":\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "docker",
      "registryUrlTemplate": "https://registry.k8s.io"
    }
  ],
  "x-dependencies": {
    "docker:library/postgres": "17.7",
    "docker:bitnami/redis": "8.4.0",
    "docker:grafana/grafana": "11.5.2",
    "docker:grafana/loki": "3.4.2",
    "docker:grafana/tempo": "2.7.1",
    "docker:kong/kong-gateway": "3.9.0",
    "docker:kong/kubernetes-ingress-controller": "3.4.0",
    "docker:authelia/authelia": "4.39.3",
    "docker:aquasecurity/trivy-operator": "0.28.0",
    "docker:kiwigrid/k8s-sidecar": "1.28.0",
    "docker:minio/minio": "RELEASE.2025-01-20T14-49-07Z",
    "ghcr:cloudnative-pg/postgresql": "17.4",
    "ghcr:kyverno/kyverno": "v1.14.0",
    "quay:prometheus/prometheus": "v3.2.1",
    "quay:prometheus/alertmanager": "v0.28.0",
    "quay:thanos/thanos": "v0.37.2",
    "quay:prometheus-operator/prometheus-operator": "v0.79.2",
    "k8s:kube-state-metrics/kube-state-metrics": "v2.15.0",
    "k8s:autoscaling/vpa-recommender": "1.3.0"
  }
}
