apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- https://infra.tekton.dev/tekton-releases/dashboard/latest/release-full.yaml
# Ingress disabled - access via Teleport (teleport0213.kro.kr)
# - manifests/ingress.yaml

# Override upstream images to use zot registry
images:
- name: ghcr.io/tektoncd/dashboard/dashboard-9623576a202fe86c8b7d1bc489905f86
  newName: zot0213.kro.kr/tektoncd/dashboard/dashboard-9623576a202fe86c8b7d1bc489905f86
  newTag: v0.63.1

patches:
- target:
    group: apiextensions.k8s.io
    version: v1
    kind: CustomResourceDefinition
  patch: |-
    - op: replace
      path: /metadata/labels/app.kubernetes.io~1instance
      value: tekton-dashboard
