# tenant-svc common chart values
# Deployment is handled via raw manifests (multi-port support)

common:
  name: tenant-svc
  namespace: lumie-platform

  # Disable chart's deployment - using raw manifest instead
  deployment:
    enabled: false

  # Disable chart's service - using raw manifest instead
  service:
    enabled: false

  ingress:
    enabled: false

  # ServiceMonitor for Prometheus
  serviceMonitor:
    enabled: true
    endpoints:
      - port: http
        interval: 30s
        path: /actuator/prometheus

  # Vault Static Secrets
  vaultStaticSecrets:
    # RabbitMQ credentials
    - name: tenant-svc-rabbitmq-vss
      path: platform/rabbitmq
      destination:
        name: tenant-svc-rabbitmq-secrets
        transformation:
          templates:
            RABBITMQ_PASSWORD: "{{ .Secrets.RABBITMQ_PASSWORD }}"
    # Database credentials (synced from CNPG-generated secret)
    - name: tenant-svc-db-vss
      path: platform/lumie-db
      destination:
        name: tenant-svc-db-secrets
        transformation:
          templates:
            username: "{{ .Secrets.LUMIE_DB_USERNAME }}"
            password: "{{ .Secrets.LUMIE_DB_PASSWORD }}"
