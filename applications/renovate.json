{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended"],
  "customManagers": [
    {
      "customType": "regex",
      "managerFilePatterns": ["argocd\\.yaml$"],
      "matchStrings": [
        "repoURL:\\s*(?<registryUrl>ghcr\\.io/[^\\s]+)\\n\\s+chart:\\s*(?<depName>[^\\s]+)\\n\\s+targetRevision:\\s*(?<currentValue>[^\\s]+)"
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "oci://{{registryUrl}}"
    }
  ],
  "packageRules": [
    {
      "description": "Homer -> Docker Hub에서 버전 체크",
      "matchPackageNames": ["zot.zot.svc.cluster.local:5000/applications/homer"],
      "registryUrls": ["https://index.docker.io"],
      "replacementName": "b4bz/homer"
    },
    {
      "description": "Alpine/git -> Docker Hub에서 버전 체크",
      "matchPackageNames": ["zot.zot.svc.cluster.local:5000/applications/alpine-git"],
      "registryUrls": ["https://index.docker.io"],
      "replacementName": "alpine/git"
    },
    {
      "description": "Code-server -> Docker Hub에서 버전 체크",
      "matchPackageNames": ["zot.zot.svc.cluster.local:5000/applications/code-server"],
      "registryUrls": ["https://index.docker.io"],
      "replacementName": "codercom/code-server"
    },
    {
      "description": "Headlamp -> GHCR에서 버전 체크",
      "matchPackageNames": ["zot.zot.svc.cluster.local:5000/applications/headlamp"],
      "registryUrls": ["https://ghcr.io"],
      "replacementName": "headlamp-k8s/headlamp"
    },
    {
      "matchDatasources": ["docker"],
      "automerge": false
    }
  ],
  "kubernetes": {"fileMatch": ["\\.yaml$"]},
  "helmv3": {"fileMatch": ["helm-values\\.yaml$"]},
  "argocd": {"fileMatch": ["argocd\\.yaml$"]}
}
