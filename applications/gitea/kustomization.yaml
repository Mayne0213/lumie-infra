apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # ArgoCD Application (주석 처리: circular dependency 방지)
  # - argocd/gitea.yaml
  # Gitea Application은 수동으로 적용: kubectl apply -f gitea/argocd/gitea.yaml

  # Namespace with Goldilocks label
  - namespace.yaml

  # Gitea Runner
  - deployment.yaml

  # Vault secrets
  - vault/gitea-admin-secret.yaml
  - vault/gitea-postgres-password.yaml
  - vault/gitea-runner-token.yaml
  - vault/gitea-minio-credentials.yaml
  - vault/minio-root-password.yaml

namespace: gitea
