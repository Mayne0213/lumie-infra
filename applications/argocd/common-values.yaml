# Common chart values for argocd
# UI/main access via Teleport, only webhook exposed externally

common:
  name: argocd

  # Disable deployment (external chart creates it)
  deployment:
    enabled: false

  service:
    enabled: false

  ingress:
    enabled: false

  # Only webhook exposed externally (GitHub needs direct access)
  # UI and health endpoints accessed via Teleport
  additionalIngresses:
    - name: webhook
      serviceName: argocd-server
      servicePort: 80
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-prod
      hosts:
        - host: argocd0213.kro.kr
          paths:
            - path: /api/webhook
              pathType: Prefix
      tls:
        - secretName: argocd-server-tls
          hosts:
            - argocd0213.kro.kr
