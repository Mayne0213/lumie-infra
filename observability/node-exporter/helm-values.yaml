# Prometheus Node Exporter Helm Values
# Chart: https://github.com/prometheus-community/helm-charts/tree/main/charts/prometheus-node-exporter

fullnameOverride: node-exporter

hostNetwork: true
hostPID: true

# Resource settings (no CPU limit for stability)
resources:
  requests:
    cpu: 15m
    memory: 100Mi
  limits:
    memory: 100Mi

service:
  type: ClusterIP
  clusterIP: None

# Prometheus ServiceMonitor 설정
# ServiceMonitor를 node-exporter namespace에 생성하여 같은 namespace의 Service를 자동 발견
prometheus:
  monitor:
    enabled: true
    additionalLabels:
      release: prometheus
    # ServiceMonitor가 Service와 같은 namespace에 있어야 함
    namespace: ""
    attachMetadata:
      node: true
    relabelings:
      - targetLabel: cluster
        replacement: "mayne-cluster"

tolerations:
  - operator: Exists
