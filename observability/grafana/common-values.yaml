# Common chart values for grafana
# All access via Teleport (no external ingress)

common:
  name: grafana

  # Disable deployment (external chart creates it)
  deployment:
    enabled: false

  service:
    enabled: false

  ingress:
    enabled: false

  # No external ingress - access via Teleport only

  # CNPG Database disabled - using shared infra-db cluster
  database:
    enabled: false

  # VSO: Create grafana-db-app secret (replaces CNPG auto-generated secret)
  vaultStaticSecrets:
    - name: grafana-db-app-vss
      path: storage/postgresql
      destination:
        name: grafana-db-app
        transformation:
          templates:
            host: infra-db-rw.infra-db.svc.cluster.local
            port: "5432"
            username: grafana
            password: "{{ .Secrets.POSTGRES_PASSWORD }}"
            dbname: grafana
            uri: "postgresql://grafana:{{ .Secrets.POSTGRES_PASSWORD }}@infra-db-rw.infra-db.svc.cluster.local:5432/grafana"
