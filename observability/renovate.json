{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended"],
  "customManagers": [
    {
      "customType": "regex",
      "managerFilePatterns": ["argocd\\.yaml$"],
      "matchStrings": [
        "repoURL:\\s*(?<registryUrl>ghcr\\.io/[^\\s]+)\\n\\s+chart:\\s*(?<depName>[^\\s]+)\\n\\s+targetRevision:\\s*(?<currentValue>[^\\s]+)"
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "oci://{{registryUrl}}"
    }
  ],
  "packageRules": [
    {
      "description": "Thanos -> Quay.io에서 버전 체크",
      "matchPackageNames": ["zot.zot.svc.cluster.local:5000/observability/thanos"],
      "registryUrls": ["https://quay.io"],
      "replacementName": "thanos/thanos"
    },
    {
      "description": "OpenTelemetry -> Docker Hub에서 버전 체크",
      "matchPackageNames": ["zot.zot.svc.cluster.local:5000/observability/opentelemetry-collector-contrib"],
      "registryUrls": ["https://index.docker.io"],
      "replacementName": "otel/opentelemetry-collector-contrib"
    },
    {
      "description": "Karma -> GHCR에서 버전 체크",
      "matchPackageNames": ["zot.zot.svc.cluster.local:5000/observability/karma"],
      "registryUrls": ["https://ghcr.io"],
      "replacementName": "prymitive/karma"
    },
    {
      "matchDatasources": ["docker"],
      "automerge": false
    }
  ],
  "kubernetes": {"fileMatch": ["\\.yaml$"]},
  "helmv3": {"fileMatch": ["helm-values\\.yaml$"]},
  "argocd": {"fileMatch": ["argocd\\.yaml$"]}
}
