# Alertmanager Helm Values
# Chart: https://github.com/prometheus-community/helm-charts/tree/main/charts/alertmanager

fullnameOverride: alertmanager

replicaCount: 1

# Soft anti-affinity to spread pods across nodes
affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchLabels:
              app.kubernetes.io/name: alertmanager
          topologyKey: kubernetes.io/hostname

# Use emptyDir instead of PVC (alert state is temporary)
# Chart automatically uses emptyDir when persistence is disabled
persistence:
  enabled: false

# Resource settings (no CPU limit for stability)
resources:
  requests:
    cpu: 15m
    memory: 100Mi
  limits:
    memory: 100Mi

# Disable default config - use secret instead
config:
  enabled: false

# Mount config from ExternalSecret
extraSecretMounts:
  - name: alertmanager-config
    mountPath: /etc/alertmanager
    secretName: alertmanager-config
    readOnly: true
