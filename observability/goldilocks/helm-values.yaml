# Goldilocks Helm Values
# Reference: https://github.com/FairwindsOps/charts/tree/master/stable/goldilocks

# Image configuration - use zot registry
image:
  repository: zot0213.kro.kr/fairwinds-ops/goldilocks
  tag: "v4.10.0"

# Dashboard configuration
dashboard:
  enabled: true
  replicaCount: 1

  # Dashboard image - use zot registry
  image:
    repository: zot0213.kro.kr/fairwinds-ops/goldilocks
    tag: "v4.10.0"

  # Resource settings (no CPU limit for stability)
  resources:
    requests:
      cpu: 15m
      memory: 100Mi
    limits:
      memory: 100Mi

  service:
    type: ClusterIP
    port: 80

  ingress:
    enabled: true
    ingressClassName: kong
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
      traefik.ingress.kubernetes.io/router.middlewares: authelia-authelia-auth@kubernetescrd
    hosts:
      - host: goldilocks0213.kro.kr
        paths:
          - path: /
            type: Prefix
    tls:
      - secretName: goldilocks-dashboard-tls
        hosts:
          - goldilocks0213.kro.kr
  
  # Affinity - Soft Anti-Affinity to spread pods across nodes
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                app.kubernetes.io/name: goldilocks
            topologyKey: kubernetes.io/hostname

# Controller configuration
controller:
  enabled: true
  replicaCount: 1

  # Resource settings (no CPU limit for stability)
  resources:
    requests:
      cpu: 15m
      memory: 100Mi
    limits:
      memory: 100Mi

  # Enable VPA recommendations for all namespaces
  # Set to false to only monitor namespaces with the label: goldilocks.fairwinds.com/enabled=true
  enableCostRecommendations: true

# VPA configuration (should already be installed)
vpa:
  # Set to false since we're installing VPA separately
  enabled: false
